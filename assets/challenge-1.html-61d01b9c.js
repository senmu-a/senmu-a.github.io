import{_ as t,p,q as o,s,R as n,t as e,Y as c,n as l}from"./framework-aa5c4115.js";const i={},r=s("h2",{id:"å®ç°-myreturntype",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#å®ç°-myreturntype","aria-hidden":"true"},"#"),n(" å®ç° MyReturnType")],-1),k={href:"https://www.typescriptlang.org/docs/handbook/2/typeof-types.html",target:"_blank",rel:"noopener noreferrer"},d=s("code",null,"typeof",-1),u={href:"https://www.typescriptlang.org/docs/handbook/2/conditional-types.html#inferring-within-conditional-types",target:"_blank",rel:"noopener noreferrer"},y=c(`<p>é¢˜ç›®è¦æ±‚å¦‚ä¸‹ï¼š</p><p>Implement the built-in <code>ReturnType&lt;T&gt;</code> generic without using it.</p><p>For example:</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">const</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token punctuation">(</span>v<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>v<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">1</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">2</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">a</span> <span class="token operator">=</span> MyReturnType<span class="token operator">&lt;</span><span class="token keyword">typeof</span> fn<span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// should be &quot;1 | 2&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li><p>åˆ†æé¢˜ç›®æ„å›¾ - å®ç°ä¸€ä¸ªç±»å‹ <code>MyReturnType&lt;T&gt;</code> æ¥è¡¨ç¤ºå‡½æ•°æ‰§è¡Œåçš„è¿”å›ç±»å‹</p></li><li><p>éœ€è¦å“ªäº›çŸ¥è¯†ï¼Ÿ</p><ol><li><p>æ³›å‹ âœ…</p></li><li><p><code>typeof</code> å¯ä»¥ç”¨æ¥è¡¨ç¤ºä¸€ä¸ªå€¼çš„ç±»å‹æ˜¯ä»€ä¹ˆï¼ŒåŒ…æ‹¬å¼•ç”¨å€¼ä»¥åŠä»–çš„å±æ€§ã€‚</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token number">11</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token string">&#39;ss&#39;</span><span class="token punctuation">,</span> sex<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token punctuation">{</span> xx<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
<span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token string">&#39;ss&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name">a</span> <span class="token operator">=</span> <span class="token keyword">typeof</span> obj<span class="token punctuation">;</span> <span class="token comment">// { name: number, age: string, sex: number[], b: { xx: number }}</span>
<span class="token keyword">type</span> <span class="token class-name">b</span> <span class="token operator">=</span> <span class="token keyword">typeof</span> arr<span class="token punctuation">;</span> <span class="token comment">// number[]</span>
<span class="token keyword">type</span> <span class="token class-name">c</span> <span class="token operator">=</span> <span class="token keyword">typeof</span> str<span class="token punctuation">;</span> <span class="token comment">// string</span>
<span class="token keyword">type</span> <span class="token class-name">d</span><span class="token operator">=</span> <span class="token keyword">typeof</span> a<span class="token punctuation">;</span> <span class="token comment">// âŒ &#39;a&#39; only refers to a type, but is being used as a value here.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><code>extends</code> æ¡ä»¶çº¦æŸï¼Œç±»ä¼¼äº js å½“ä¸­çš„ä¸‰å…ƒè¿ç®—ç¬¦çš„é—®å·</p></li><li><p><code>infer</code> ç±»å‹æ¨æ–­ï¼Œå¯ä»¥ç”¨åœ¨ <code>extends</code> æ¡ä»¶ç±»å‹å†…è¿›è¡Œæ¨æ–­</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token comment">// æ¯”å¦‚ï¼Œè¿™é“é¢˜éœ€è¦è¿”å› fn çš„è¿”å›å€¼é‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ extends æ¥åˆ¤æ–­æ³›å‹ T æ˜¯å¦æ˜¯å‡½æ•°ï¼Œç„¶åå†æ¨æ–­è¿”å›å€¼</span>
<span class="token keyword">type</span> <span class="token class-name">GetReturnType<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span></span> <span class="token builtin">any</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">infer</span> <span class="token constant">R</span> <span class="token operator">?</span> <span class="token constant">R</span> <span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>
<span class="token comment">// ç­‰å·å‰é¢çš„ extends ç”¨äºç±»å‹çº¦æŸ</span>
<span class="token comment">// ç­‰å·åé¢çš„ extends ç±»ä¼¼æ¡ä»¶åˆ¤æ–­ï¼Œç„¶åå†åˆ©ç”¨ infer æ¨æ–­è¿”å›å€¼ Rï¼Œå¦‚æœ R å­˜åœ¨å°±è¿”å› R çš„ç±»å‹</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol></li><li><p>è¯¥å¦‚ä½•è§£é¢˜ï¼Ÿ - æ‡‚äº†ä»¥ä¸Šçš„çŸ¥è¯†å°±å¾ˆç®€å•äº†ã€‚</p></li></ol><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">MyReturnType<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span></span> <span class="token builtin">any</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">infer</span> <span class="token constant">R</span> <span class="token operator">?</span> <span class="token constant">R</span> <span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="å®ç°-myomit" tabindex="-1"><a class="header-anchor" href="#å®ç°-myomit" aria-hidden="true">#</a> å®ç° MyOmit</h2><p>é¢˜ç›®è¦æ±‚å¦‚ä¸‹ï¼š</p><p>Implement the built-in <code>Omit&lt;T, K&gt;</code> generic without using it.</p><p>Constructs a type by picking all properties from <code>T</code> and then removing <code>K</code></p><p>For example:</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Todo</span> <span class="token punctuation">{</span>
  title<span class="token operator">:</span> <span class="token builtin">string</span>
  description<span class="token operator">:</span> <span class="token builtin">string</span>
  completed<span class="token operator">:</span> <span class="token builtin">boolean</span>
<span class="token punctuation">}</span>
  
<span class="token keyword">type</span> <span class="token class-name">TodoPreview</span> <span class="token operator">=</span> MyOmit<span class="token operator">&lt;</span>Todo<span class="token punctuation">,</span> <span class="token string">&#39;description&#39;</span> <span class="token operator">|</span> <span class="token string">&#39;title&#39;</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// { completed: boolean }</span>
<span class="token keyword">const</span> todo<span class="token operator">:</span> TodoPreview <span class="token operator">=</span> <span class="token punctuation">{</span> completed<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li>åˆ†æé¢˜ç›®æ„å›¾ï¼Œå®ç°ç±»ä¼¼ <code>Omit&lt;T, K&gt;</code> çš„åŠŸèƒ½ï¼Œæ¢å¥è¯è¯´å°±æ˜¯æ’é™¤æ³›å‹ <code>T</code> ä¸­çš„å±æ€§ï¼Œè¿™ä¸ªå±æ€§ç”± <code>K</code> æ¥å®šä¹‰ã€‚</li><li>éœ€è¦å“ªäº›çŸ¥è¯†ï¼Ÿ <ol><li>æ³›å‹ âœ…</li><li>æ³›å‹ <code>T</code> å¦‚ä½•æ’é™¤æ‰è”åˆç±»å‹ï¼Ÿ <ol><li>è”åˆç±»å‹æ˜¯æ³›å‹ <code>T</code> çš„ <code>key</code></li><li><code>keyof T</code> =&gt; <code>&#39;title&#39; | &#39;description&#39; | &#39;completed&#39;</code>ã€<code>K</code> =&gt; <code>&#39;description&#39; | &#39;title&#39;</code></li><li><code>keyof T extends K ? never : T</code> å¦‚æœ <code>K</code> åœ¨ <code>T</code> çš„ <code>key</code> ä¸­ï¼Œå°±æ’é™¤ä»–</li></ol></li></ol></li><li>å¦‚ä½•è§£é¢˜ï¼Ÿ - æ‡‚äº†ä»¥ä¸ŠçŸ¥è¯†å°±ç®€å•äº†</li></ol><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">MyExclude<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">U</span></span> <span class="token operator">?</span> <span class="token builtin">never</span> <span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">MyOmit<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> object<span class="token punctuation">,</span> <span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token keyword">keyof</span> <span class="token builtin">any</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>key <span class="token keyword">in</span> MyExclude<span class="token operator">&lt;</span><span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span><span class="token operator">&gt;</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span>key<span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="å®ç°-mypick" tabindex="-1"><a class="header-anchor" href="#å®ç°-mypick" aria-hidden="true">#</a> å®ç° MyPick</h2><p>Implement the built-in Pick&lt;T, K&gt; generic without using it.</p><p>Constructs a type by picking the set of properties K from T</p><p>For example:</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Todo</span> <span class="token punctuation">{</span>
  title<span class="token operator">:</span> <span class="token builtin">string</span>
  description<span class="token operator">:</span> <span class="token builtin">string</span>
  completed<span class="token operator">:</span> <span class="token builtin">boolean</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">TodoPreview</span> <span class="token operator">=</span> MyPick<span class="token operator">&lt;</span>Todo<span class="token punctuation">,</span> <span class="token string">&#39;title&#39;</span> <span class="token operator">|</span> <span class="token string">&#39;completed&#39;</span><span class="token operator">&gt;</span>

<span class="token keyword">const</span> todo<span class="token operator">:</span> TodoPreview <span class="token operator">=</span> <span class="token punctuation">{</span>
  title<span class="token operator">:</span> <span class="token string">&#39;Clean room&#39;</span><span class="token punctuation">,</span>
  completed<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li>åˆ†æé¢˜ç›®æ„å›¾ï¼Œå®ç°ç±»ä¼¼ <code>MyPick&lt;T, K&gt;</code> çš„åŠŸèƒ½ï¼Œæ¢å¥è¯è¯´å°±æ˜¯é€‰æ‹©æ³›å‹ <code>T</code> ä¸­çš„å±æ€§ï¼Œè¿™ä¸ªå±æ€§ç”± <code>K</code> æ¥å®šä¹‰ã€‚</li><li>éœ€è¦å“ªäº›çŸ¥è¯†ï¼Ÿ <ol><li>æ³›å‹ âœ…</li><li>æ³›å‹ <code>T</code> å±äº <code>K</code> çš„å±æ€§é€‰æ‹©å‡ºæ¥ï¼Œä¸ä¸Šé¢ <code>MyOmit</code> ç›¸å</li></ol></li><li>å¦‚ä½•è§£é¢˜ï¼Ÿ</li></ol><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">MyInclude<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">U</span></span> <span class="token operator">?</span> <span class="token constant">T</span> <span class="token operator">:</span> <span class="token builtin">never</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">MyPick<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token keyword">keyof</span> <span class="token builtin">any</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> MyInclude<span class="token operator">&lt;</span><span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span><span class="token operator">&gt;</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="å®ç°-getreadonlykeys" tabindex="-1"><a class="header-anchor" href="#å®ç°-getreadonlykeys" aria-hidden="true">#</a> å®ç° GetReadonlyKeys</h2><p>Implement a generic <code>GetReadonlyKeys&lt;T&gt;</code> that returns a union of the readonly keys of an Object.</p><p>For example</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Todo</span> <span class="token punctuation">{</span>
  <span class="token keyword">readonly</span> title<span class="token operator">:</span> <span class="token builtin">string</span>
  <span class="token keyword">readonly</span> description<span class="token operator">:</span> <span class="token builtin">string</span>
  completed<span class="token operator">:</span> <span class="token builtin">boolean</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Keys</span> <span class="token operator">=</span> GetReadonlyKeys<span class="token operator">&lt;</span>Todo<span class="token operator">&gt;</span> <span class="token comment">// expected to be &quot;title&quot; | &quot;description&quot;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li>åˆ†æé¢˜ç›®æ„å›¾ï¼šè·å–åˆ°æ³›å‹ <code>T</code> ä¸­æ˜¯ <code>readonly</code> çš„å±æ€§ï¼Œè¿”å›è”åˆç±»å‹ã€‚</li><li>éœ€è¦å“ªäº›çŸ¥è¯†ï¼Ÿ <ol><li>æ³›å‹ âœ…</li><li>è·å–ç±»å‹å¯¹è±¡çš„åªè¯»å±æ€§ <ol><li><code>T[K]</code> è¿™æ ·æ˜¯è·å–åˆ°å±æ€§å€¼</li><li><code>keyof T</code> æ˜¯è·å–å±æ€§ï¼Œå†è¿›è¡Œ <code>readonly</code> çš„ç­›é€‰åˆ¤æ–­ <ol><li><code>type MyReadonlyKey&lt;T extends keyof any&gt; = T extends readonly T ? T : never;</code> âŒ æ— æ³•é€šè¿‡è¿™ç§æ–¹å¼æ‹¿åˆ°å…·æœ‰ <code>readonly</code> çš„å±æ€§</li></ol></li><li>æ ¸å¿ƒè¿˜æ˜¯æ€æ ·ç­›é€‰å‡ºæ¥åªè¯»ç±»å‹ï¼ŒğŸ‘†ä¸Šé¢çš„æ–¹æ³•ä¸è¡Œï¼Œåªèƒ½é€šè¿‡ä¸€ä¸ªè¾…åŠ©ç±»å‹å‡½æ•° <code>Equal&lt;T, U&gt;</code> æ¥åˆ¤æ–­ä¸¤ä¸ªç±»å‹å¯¹è±¡æ˜¯å¦ç›¸ç­‰æ¥ç­›é€‰åªè¯»å±æ€§äº† <ol><li><code>type Equal&lt;X, Y&gt; = (&lt;T&gt;() =&gt; T extends X ? 1 : 2) extends (&lt;T&gt;() =&gt; T extends Y ? 1 : 2) ? true : false</code></li><li>çŸ¥é“äº†å¦‚ä½•åˆ¤æ–­åªè¯»å±æ€§ï¼Œè¿˜å¾—çŸ¥é“ä¸€ä¸ªçŸ¥è¯†ï¼š<code>type foo&lt;T&gt; = { [K in keyof T as NewType]: T[K] }</code> è¿™é‡Œçš„ <code>as</code> ä»£è¡¨ç±»å‹æ˜ å°„ï¼Œæ„æ€æ˜¯ <code>K</code> æœ€ç»ˆè¢«å½±å°„ä¸º <code>NewType</code></li></ol></li></ol></li></ol></li><li>æœ‰äº†è¿™äº›çŸ¥è¯†å°±å¯å¼€æäº†ï¼</li></ol><p><code>&lt;T&gt;() =&gt; T extends X ? 1 : 2</code> è¿™ä¸ªæ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿ï¼Ÿ</p><p>å…¶å®è¿™æ˜¯ä¸€ä¸ªæ³›å‹å‡½æ•°ï¼Œä»”ç»†çœ‹å®šä¹‰ä¸€ä¸ªæ³›å‹ <code>T</code> ç»™ä¸€ä¸ªæ²¡æœ‰å…¥å‚çš„å‡½æ•°ï¼Œç„¶åç”¨æ³›å‹ <code>T</code> æ¥åˆ¤æ–­è¿”å›å€¼ï¼Œè¿™æ ·å¯ä»¥å»¶è¿Ÿåˆ¤æ–­ã€‚</p><p><code>[K in keyof T as Equal&lt;Readonly&lt;{ [P in K ]: T[K]}&gt;, { [P in K]: T[K]}&gt; extends true ? K : never]</code> è¿™åˆæ˜¯ä»€ä¹ˆï¼Ÿ</p><p>è¿™ä¸ªçš„æ„æ€å°±æ˜¯é€ä¸ªåˆ¤æ–­ <code>K</code> å±æ€§æ˜¯å¦æ˜¯åªè¯»çš„ï¼Œå¦‚æœæ˜¯ <code>[K in keyof T as Equal&lt;Readonly&lt;T&gt;, T&gt; extends true ? K : never]</code> ç›¸å½“äºç›´æ¥åˆ¤æ–­æ•´ä¸ªç±»å‹å¯¹è±¡ï¼Œé‚£è‚¯å®šä¸å¯¹ã€‚</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token comment">// TS ä¸­çš„ä¸¥æ ¼æ¯”è¾ƒ</span>
<span class="token keyword">type</span> <span class="token class-name">Equal<span class="token operator">&lt;</span><span class="token constant">X</span><span class="token punctuation">,</span> <span class="token constant">Y</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span>
  <span class="token punctuation">{</span> <span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">X</span></span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span>
  <span class="token keyword">extends</span>
  <span class="token punctuation">{</span> <span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">Y</span></span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span>
  <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name">GetReadonlyKeys<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token keyword">keyof</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span><span class="token constant">K</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span> <span class="token keyword">as</span> Equal<span class="token operator">&lt;</span>Readonly<span class="token operator">&lt;</span><span class="token punctuation">{</span> <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token constant">K</span> <span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">K</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token constant">K</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">K</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token operator">&gt;</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token boolean">true</span></span> <span class="token operator">?</span> <span class="token constant">K</span> <span class="token operator">:</span> <span class="token builtin">never</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">K</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="å®ç°-myreadonly" tabindex="-1"><a class="header-anchor" href="#å®ç°-myreadonly" aria-hidden="true">#</a> å®ç° MyReadOnly</h2><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Todo</span> <span class="token punctuation">{</span>
  title<span class="token operator">:</span> <span class="token builtin">string</span>
  description<span class="token operator">:</span> <span class="token builtin">string</span>
  completed<span class="token operator">:</span> <span class="token builtin">boolean</span>
<span class="token punctuation">}</span>

<span class="token comment">// å°†æ‰€æœ‰å±æ€§éƒ½è®¾ç½® readonly </span>
<span class="token keyword">type</span> <span class="token class-name">MyReadOnly1<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">readonly</span> <span class="token punctuation">[</span><span class="token constant">K</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">K</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token comment">// é€‰æ‹©æ€§çš„è®¾ç½® readonly</span>
<span class="token keyword">type</span> <span class="token class-name">MyReadOnly2<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> Omit<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span><span class="token operator">&gt;</span> <span class="token operator">&amp;</span> <span class="token punctuation">{</span>
  <span class="token operator">+</span><span class="token keyword">readonly</span> <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token constant">K</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">MyReadOnly2Other<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">readonly</span> <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token constant">K</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span> <span class="token operator">&amp;</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>key <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span> <span class="token keyword">as</span> key <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">K</span></span> <span class="token operator">?</span> <span class="token builtin">never</span> <span class="token operator">:</span> key<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span>key<span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,33);function m(v,b){const a=l("ExternalLinkIcon");return p(),o("div",null,[r,s("blockquote",null,[s("p",null,[n("å‚è€ƒæ–‡æ¡£ï¼š"),s("a",k,[d,n(" ç±»å‹è¿ç®—ç¬¦"),e(a)]),n(" å‚è€ƒæ–‡æ¡£ï¼š"),s("a",u,[n("æ¡ä»¶ç±»å‹"),e(a)])])]),y])}const T=t(i,[["render",m],["__file","challenge-1.html.vue"]]);export{T as default};
